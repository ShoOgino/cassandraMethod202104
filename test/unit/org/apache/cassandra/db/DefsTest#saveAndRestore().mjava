    @Test
    public void saveAndRestore() throws IOException
    {
        // verify dump and reload.
        UUID first = UUIDGen.makeType1UUIDFromHost(FBUtilities.getBroadcastAddress());
        DefsTable.dumpToStorage(first);
        List<KSMetaData> defs = new ArrayList<KSMetaData>(DefsTable.loadFromStorage(first));

        assert defs.size() > 0;
        assert defs.size() == Schema.instance.getNonSystemTables().size();
        for (KSMetaData loaded : defs)
        {
            KSMetaData defined = Schema.instance.getTableDefinition(loaded.name);
            assert defined.equals(loaded);
        }
    }

