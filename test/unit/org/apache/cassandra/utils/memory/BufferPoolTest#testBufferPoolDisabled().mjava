    @Test
    public void testBufferPoolDisabled()
    {
        BufferPool.DISABLED = true;
        BufferPool.ALLOCATE_ON_HEAP_WHEN_EXAHUSTED = true;
        ByteBuffer buffer = BufferPool.get(1024);
        assertEquals(0, BufferPool.unsafeNumChunks());
        assertNotNull(buffer);
        assertEquals(1024, buffer.capacity());
        assertFalse(buffer.isDirect());
        assertNotNull(buffer.array());
        BufferPool.put(buffer);
        assertEquals(0, BufferPool.unsafeNumChunks());

        BufferPool.ALLOCATE_ON_HEAP_WHEN_EXAHUSTED = false;
        buffer = BufferPool.get(1024);
        assertEquals(0, BufferPool.unsafeNumChunks());
        assertNotNull(buffer);
        assertEquals(1024, buffer.capacity());
        assertTrue(buffer.isDirect());
        BufferPool.put(buffer);
        assertEquals(0, BufferPool.unsafeNumChunks());

        // clean-up
        BufferPool.DISABLED = false;
        BufferPool.ALLOCATE_ON_HEAP_WHEN_EXAHUSTED = true;
    }

