    // this came as a result of CASSANDRA-995
    @Test
    public void testTransKsMigration() throws IOException, ConfigurationException
    {
        CleanupHelper.cleanupAndLeaveDirs();
        DatabaseDescriptor.loadSchemas();
        assert Schema.instance.getNonSystemTables().size() == 0;
        
        // add a few.
        AddKeyspace ks0 = new AddKeyspace(new KSMetaData("ks0", SimpleStrategy.class, KSMetaData.optsWithRF(3)));
        ks0.apply();
        AddKeyspace ks1 = new AddKeyspace(new KSMetaData("ks1", SimpleStrategy.class, KSMetaData.optsWithRF(3)));
        ks1.apply();

        assert Schema.instance.getTableDefinition("ks0") != null;
        assert Schema.instance.getTableDefinition("ks1") != null;

        Schema.instance.clearTableDefinition(Schema.instance.getTableDefinition("ks0"), new UUID(4096, 0));
        Schema.instance.clearTableDefinition(Schema.instance.getTableDefinition("ks1"), new UUID(4096, 0));

        assert Schema.instance.getTableDefinition("ks0") == null;
        assert Schema.instance.getTableDefinition("ks1") == null;
        
        DatabaseDescriptor.loadSchemas();

        assert Schema.instance.getTableDefinition("ks0") != null;
        assert Schema.instance.getTableDefinition("ks1") != null;
    }

