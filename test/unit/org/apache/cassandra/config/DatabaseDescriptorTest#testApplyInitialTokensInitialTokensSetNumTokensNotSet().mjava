    @Test
    public void testApplyInitialTokensInitialTokensSetNumTokensNotSet() throws Exception
    {
        Config config = DatabaseDescriptor.loadConfig();

        unregisterSnitchesForTokenConfigTest();

        try
        {
            config.initial_token = "0,256,1024";
            config.num_tokens = null;
            DatabaseDescriptor.applyTokensConfig(config);
            Assert.fail("setting initial_token and not setting num_tokens is invalid");
        }
        catch (ConfigurationException ex)
        {
            Assert.assertEquals("initial_token was set but num_tokens is not!", ex.getMessage());
        }
        finally
        {
            unregisterSnitchesForTokenConfigTest();
        }
    }

