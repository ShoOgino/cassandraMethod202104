    @Test
    public void serverSupportsV3AndV4ByDefault() throws Throwable
    {
        reinitializeNetwork();
        // client can explicitly request either V3 or V4
        testConnection(ProtocolVersion.V3, ProtocolVersion.V3);
        testConnection(ProtocolVersion.V4, ProtocolVersion.V4);

        // if not specified, V4 is the default
        testConnection(null, ProtocolVersion.V4);
    }

