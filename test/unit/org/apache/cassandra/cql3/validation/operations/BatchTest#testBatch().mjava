    /**
     * Test batch statements
     * migrated from cql_tests.py:TestCQL.batch_test()
     */
    @Test
    public void testBatch() throws Throwable
    {
        createTable("CREATE TABLE %s (userid text PRIMARY KEY, name text, password text)");

        execute("BEGIN BATCH\n" +
                "INSERT INTO %1$s (userid, password, name) VALUES ('user2', 'ch@ngem3b', 'second user');\n" + 
                "UPDATE %1$s SET password = 'ps22dhds' WHERE userid = 'user3';\n" + 
                "INSERT INTO %1$s (userid, password) VALUES ('user4', 'ch@ngem3c');\n" + 
                "DELETE name FROM %1$s WHERE userid = 'user1';\n" + 
                "APPLY BATCH;");

        assertRows(execute("SELECT userid FROM %s"),
                   row("user2"),
                   row("user4"),
                   row("user3"));
    }

