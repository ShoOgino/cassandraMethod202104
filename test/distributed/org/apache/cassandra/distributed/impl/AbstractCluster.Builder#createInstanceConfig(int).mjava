        private InstanceConfig createInstanceConfig(int nodeNum)
        {
            String ipPrefix = "127.0." + subnet + ".";
            String seedIp = ipPrefix + "1";
            String ipAddress = ipPrefix + nodeNum;
            long token = tokenSupplier.token(nodeNum);

            NetworkTopology topology = NetworkTopology.build(ipPrefix, 7012, nodeIdTopology);

            InstanceConfig config = InstanceConfig.generate(nodeNum, ipAddress, topology, root, String.valueOf(token), seedIp);
            if (configUpdater != null)
                configUpdater.accept(config);

            return config;
        }

