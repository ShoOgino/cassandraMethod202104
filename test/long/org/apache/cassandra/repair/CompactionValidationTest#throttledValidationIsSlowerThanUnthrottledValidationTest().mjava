    @Test
    public void throttledValidationIsSlowerThanUnthrottledValidationTest() throws Exception
    {
        // unthrottle, validate as fast as possible
        DatabaseDescriptor.setCompactionThroughputMbPerSec(0);
        final long unthrottledRuntime = executeValidation();

        // throttle to 1 MBPS
        DatabaseDescriptor.setCompactionThroughputMbPerSec(1);
        final long throttledRuntime = executeValidation();

        // throttle to 2 MBPS
        DatabaseDescriptor.setCompactionThroughputMbPerSec(2);
        final long throttledRuntime2 = executeValidation();

        assertTrue(format("Validation compaction with throttled throughtput to 1 Mbps took less time (in ms) than unthrottled validation compaction: %s vs. %s",
                          throttledRuntime, unthrottledRuntime),
                   throttledRuntime > unthrottledRuntime);

        assertTrue(format("Validation compaction with throttled throughtput on 1 Mbps took less time (in ms) than throttled validation compaction to 2 Mbps: %s vs. %s",
                          throttledRuntime, throttledRuntime2),
                   throttledRuntime > throttledRuntime2);
    }

