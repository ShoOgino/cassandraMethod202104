        public void run()
        {
            latch.countDown();
            outputHandler.debug(String.format("Streaming session to %s completed (waiting on %d outstanding sessions)", endpoint, latch.getCount()));

            // There could be race with stop being called twice but it should be ok
            if (latch.getCount() == 0)
                client.stop();
        }

